# 変更判断


判断のなかでもっとも基本的な判断は
**肯定判断** (affirmative judgement / O 型判断) です。
すでに表明されている肯定判断を打ち消すときに、
**否定判断** (negative judgement / X 型判断) が使われます。
判断集合を変更するには、間違った判断を取り除き、
正しい判断を追加すればよいので、原理上、
肯定判断と否定判断で、どのような変更でも表現できますが、
判断のなかの特定の項目だけを変更するという
**変更判断** (alterative judgement / Y 型判断)
があると便利な場合があります。

甲州計算機のバージョン 0.63 には、変更判断は実装されていません。
これは、変更判断の案を検討するためのノートです。


肯定判断と否定判断
------------------------------------------------------------------

項目 `/x` `/y` からなる判断種 `P` の肯定判断として、
つぎの判断を考えましょう。

```
|-- P  /x 1  /y 20
```

この判断の `/y 20` が間違っており、`/y 30` に訂正するとします。
そのためには、上の判断を否定して、正しい肯定判断を追加します。

```
|-X P  /x 1  /y 20
|-- P  /x 1  /y 30
```


変更判断
------------------------------------------------------------------

これは、変更判断という形で、省略して書けます。
肯定判断は `|--`、否定判断は `|-X` であったのに対して、
変更判断は `|-Y` で表現し、その内部に、一部の項目を対象として、
肯定と否定が表明されます。

```
|-Y P  /x 1
  |-X  /y 20
  |--  /y 30
```

変更判断の否定部分を省略すると、
`/y` がなんであっても、`/y 30` に変更するという意味になります。

```
|-Y P  /x 1
  |--  /y 30
```

これは、つぎのような判断集合に相当すると考えられます。

```
|-X P  /x 1  /y 19
|-X P  /x 1  /y 20
...
|-X P  /x 1  /y 29
|-- P  /x 1  /y 30
|-X P  /x 1  /y 31
|-X P  /x 1  /y 32
...
```


単数と複数
------------------------------------------------------------------

否定判断と変更判断が、ちょうど、ひとつの組に作用するのか、
0 個以上の複数の組に作用するのかで分類できると、
安全にデータを更新することにつながります。
というのは、ひとつの組のみに作用することを明示することで、
間違って複数の組が更新されることを防げるからです。

単数であることを明示するか、複数であることを明示するかという設計上の選択がありますが、
ここでは、ひとつの組のみを対象とするときに `1` をつけるとしましょう。
`|-X` の代わりに `|-X1` と書き、`|-Y` の代わりに `|-Y1` と書きます。

```
|-X  P  /x 1
```

は、`/ 1x` である組が複数あっても、まとめて、それらを打ち消しますが、

```
|-X1  P  /x 1  /y 20
```

は、`/x 1` `/y 20` の判断が、ちょうど、ひとつしかないときだけ、
更新が成功します。`|-Y1` についても、同様の考え方とします。


交わり
------------------------------------------------------------------

関係の交わりを計算するときも、関係写像 `a` の出力の各組に対して、
`b` の出力のなかから、ちょうど、ひとつの組がみつかるという条件を追加する

```
a | meet-1 b
```

が考えられます。これは `a | meet b` と同様に動作しますが、
複数の組がみつかったときに実行時エラーとなります。
`b` に組がないか、ひとつだけあるかは、

```
a | maybe-1 b
```

になるでしょう。

