# 略号



記号の数が増えてくると、それらに長い名前を与えて、
同じ名前になることを避けたくなります。
一方で、長い名前は人間にとって扱いにくいので、
短くしたいという要望も、同時に、生じます。
わたしたちが使う日常の言語では、ひとつの記号 (単語) が
文脈に応じて、派生的な意味に変化するようにして、
記号数を減らしていますが、ここでは、長い名前を
短く書ける略号を使う方法を考えましょう。

このノートが書かれた時点のバージョン 0.38 の甲州計算機には、
この機能は実装されていません。



### short キーワード

長い記号は、その途中を省略することで、短く書けます。
たとえば、`abcdefg` を `a.g` と書けば短くなります。
`a.` が `abcdef` の省略であると考えれば、
`a.g` から、もとの記号 `abcdefg` を復元できます。

いま、`a.` が `abcdef` の省略であることを、
`short` というキーワードを使って、
つぎのように書けるとしましょう。

``` text
short a abcdef
```

この略号の定義があると、つぎのような判断

``` text
|-- A  /text a.g
```

が、正式名の判断

``` text
|-- A  /text 'abcdefg
```

として解釈されます。



### 名前空間との違い

記号 `a` は名前空間のようにもみえますが、
単なる略号で、つぎのような `a.g` と `b.fg` は、
同じ記号をあらわします。

``` text
short a abcdef
short b abcde

|-- A  /text a.g
|-- A  /text b.fg
```

これにより、記号系は単一の空間を共有しつつ、
記号の衝突の大部分を避けられるようになります。



### 有効範囲

`short` で定義された略号の有効範囲は、
通常は、その節の範囲内に限定されます。
しかし、複数の節で、略号を共有するための
仕組みがあってもよいかもしれません。
たとえば、`import` に対して `-short`
オプションをつけるなどが考えられます。

``` text
import -short foo/short
```



### 略号の出力

略号つきの記号は、原則として、出力も同じ略号が使われます。
ただし、異なる節で同じ略号が使われているときは、
略号が衝突しないように生成された略号などに置き換えられます。



### 略号つきの import

節を `import` すると同時に略号をつけたいことがあります。
つぎの `import` と `short` の組み合わせ

``` text
import foo/bar
short a foo/bar/
```

を同時に行うために、`-with` オプション
などがあるとよいでしょう。

``` text
import -with a foo/bar
```

節 `foo/bar` 自体も、
つぎのような `-with` オプションつきで定義します。

``` text
section -with a foo/bar

a.xxx : <RELMAP>
a.yyy : <RELMAP>
```



### 略号を使わない節

`section -with` を使わずに、すべて、正式名を使っても構いません。
たとえば、上の節をつぎのように書いても同じです。

``` text
section foo/bar

foo/bar/xxx : <RELMAP>
foo/bar/yyy : <RELMAP>
```

