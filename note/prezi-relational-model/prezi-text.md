これは [Prezi] のプレゼンテーションからの抜粋です。
詳しい説明は [原稿] をご覧ください。

[Prezi]: http://prezi.com/j8puepcv358e/presentation/
[原稿]: https://github.com/seinokatsuhiro/koshucode-design/blob/master/note/prezi-relational-model/README.md

----


関係モデル -- 判断することの計算体系
=======================================================

RDB

R = リレーショナル

DB = データベース

リレーショナル = 関係

関係データベースとは何か

関係 **モデル** とは何か


/SQL
-------------------------------------------------------

1979 年に商用製品が発売されて以降、データベースの標準形に

SQL は関係モデルにもとづくデータベース言語

おおよそ、もとづく

 - 準関係型言語

Wikipedia は言う

 - 行の重複
 - 名前のない列
 - 列名の重複
 - 列に順序がある
 - 予想外の更新結果になるビュー
 - 表はひとつ以上の列をもつ
 - NULL

SQL を通すと関係モデルは **ぼやけて** しまう

本来の関係モデルを知らなければ SQL を使いこなせない


/ER モデル
-------------------------------------------------------

E = 実体

R = 関連 (関連 ≠ 関係)

実体は世界内に存在する

 - 作品
 - 監督
 - 俳優

E/R モデルでデータモデリングし、SQL データベースに実装する

問題 !

E/R モデルと関係モデルは、**世界の見方** が大きく異なる

E/R モデルでモデリングして、E/R データベースに実装する ?

 - E/R データベースをつくった人はいない

○○○ で設計して、関係モデルに実装する


/判断
-------------------------------------------------------

チャップリンは三大喜劇王のひとりである

判断

 - 正しいと信じられる／考えられること
 - 間違いと信じられる／考えられること

○○○ は三大喜劇王のひとりである

三大喜劇王

 - チャップリン
 - キートン
 - ロイド

**項目化** された判断

 - /actor は三大喜劇王である
 - /title という作品に /cast が出演している

フレーゲ・ストローク

    |-- 三大喜劇王  /actor チャップリン
    |-- 三大喜劇王  /actor キートン
    |-- 三大喜劇王  /actor ロイド

    |-- 出演  /title ライムライト  /cast チャップリン
    |-- 出演  /title ライムライト  /cast キートン
    |-- 出演  /title モダンタイムス  /cast チャップリン

三大喜劇王のチャップリンとキートンは共演したことがある
-- という判断をみちびくには ?

判断をみちびく

    |-- 三大喜劇王  /actor チャップリン
    |-- 三大喜劇王  /actor キートン
    |-- 三大喜劇王  /actor ロイド

    |-- 出演  /title ライムライト  /cast チャップリン
    |-- 出演  /title ライムライト  /cast キートン
    |-- 出演  /title モダンタイムス  /cast チャップリン

              ↓

    |-- 共演 /title  ライムライト
             /cast-1 チャップリン
             /cast-2 キートン

関係モデルとは -- 判断から判断をみちびくときに使う計算体系


計算例
-------------------------------------------------------

三大喜劇王の共演

判断集合

    |-- 三大喜劇王  /actor チャップリン
    |-- 三大喜劇王  /actor キートン
    |-- 三大喜劇王  /actor ロイド

    |-- 出演  /title ライムライト  /cast チャップリン
    |-- 出演  /title ライムライト  /cast ブルーム
    |-- 出演  /title ライムライト  /cast キートン
    |-- 出演  /title モダンタイムス  /cast チャップリン
    |-- 出演  /title うり二つ  /cast キートン

判断集合を関係に変換

    /actor
    チャップリン
    キートン
    ロイド

    /title : /cast
    ライムライト : チャップリン
    ライムライト : ブルーム
    ライムライト : キートン
    モダンタイムス : チャップリン
    うり二つ : キートン

/actor から /cast へ項目名変更

    /actor
    チャップリン
    キートン
    ロイド

    /cast
    チャップリン
    キートン
    ロイド

関係を合成
(/cast を共有項目とする交わり)

    /title : /cast
    ライムライト : チャップリン
    ライムライト : キートン
    モダンタイムス : チャップリン
    うり二つ : キートン

/cast を /cast-1 に項目変更

    /title : /cast-1
    ライムライト : チャップリン
    ライムライト : キートン
    モダンタイムス : チャップリン
    うり二つ : キートン

/cast を /cast-2 に項目変更

    /title : /cast-2
    ライムライト : チャップリン
    ライムライト : キートン
    モダンタイムス : チャップリン
    うり二つ : キートン

関係を合成
(/title を共有項目とする交わり)

    /title : /cast-1 : /cast-2
    ライムライト : チャップリン : チャップリン
    ライムライト : チャップリン : キートン
    ライムライト : キートン : チャップリン
    ライムライト : キートン : キートン
    モダンタイムス : チャップリン : チャップリン
    うり二つ : キートン : キートン

/cast-1 = /cast-2 を除く

    /title : /cast-1 : /cast-2
    ライムライト : チャップリン : キートン
    ライムライト : キートン : チャップリン

/cast-1 < /cast-2 で制限

    /title : /cast-1 : /cast-2
    ライムライト : キートン : チャップリン

関係を判断集合に変換

    |-- 共演  /title ライムライト  /cast-1 キートン  /cast-2 チャップリン
    (キートンとチャップリンはライムライトで共演した)


関係
-------------------------------------------------------

関係とは ?

関係は判断集合に対応する

 - 同種の判断
 - 互いに変換が可能

判断集合

    |-- 出演  /title ライムライト  /cast チャップリン
    |-- 出演  /title ライムライト  /cast ブルーム
    |-- 出演  /title ライムライト  /cast キートン
    |-- 出演  /title モダンタイムス  /cast チャップリン

関係

    /title : /cast
    ライムライト : チャップリン
    ライムライト : ブルーム
    ライムライト : キートン
    モダンタイムス : チャップリン

 - 項目 (列) に順序がない -- 判断に意味の差異が生じないから
 - 組 (行) に順序がない -- 判断の成否に差異が生じないから
 - 組 (行) に重複がない -- 正しいことは何度述べても同じだから

関係の **集合** としての性質は、
判断の **論理** から導かれる

データ解釈

 - 判断は意味をもつ
 - 関係は意味をもたない
 - ただし、関係に意味が同伴する

4 週間は何日 ?

 - 1 週間は 7 日 | 4 週間
 - 7 | 4
 - 7 × 4 = 28
 - 4 週間は 28 日

関係から関係に変換する演算

 - 項目の除去
 - 項目の追加
 - 項目名の変更
 - 組の制限
 - 交わり (関係の合成)
 - 結び (関係の合成)

関係とは -- 判断から判断を計算するとき演算対象となる記号

