この文章はデータベース・セミナー用の原稿です。
スライドは [Prezi] をみてください。

------------------------------------------------------------------

Oracle や MySQL などのデータベース製品は、
RDB とよばれるタイプのデータベース管理システムです。
RDB の「R」は「リレーショナル」という言葉に対応しています。
もちろん、「DB」は「データベース」に対応しています。
日本語になおすと、「リレーショナル」は「関係」という意味になります。
つまり、「RDB」は「関係データベース」、あるいは、
より形容詞らしくいうと、「関係型データベース」という日本語になります。
それでは 関係データベースとは、本質的には、なんでしょうか。
あるいは、関係データベースが立脚するところの理論である
関係モデルとは、本質的には、なんなのでしょうか。


関係モデル -- 判断することの計算体系
==================================================================

結論を先にいうと、関係モデルとは、「判断することの計算体系である」
という考え方を採用します。関係モデルをこのように捉えることで、
理論の形式と機能が、より明快に理解できるようになります。

(5 分)


SQL
------------------------------------------------------------------
(10 分 + 2 分)

データベース言語の SQL は、1970 年に理論が発表され、
そのおよそ 10 年後の 1979 年に Oracle の前身の
Relational Software Inc から最初の商用製品が発売されて以降、
データベースの標準として広く使われています。

SQL は関係モデルにもとづくデータベース言語のひとつです。
そのため、SQL データベースは関係データベース (RDB) として紹介されます。
しかし、そのもとづき方をよく見ていくと、
「おおよそ、もとづく」というものにすぎず、
厳密には、「準関係型」データベース言語とよぶべきものであることがわかります。
データベースの専門家のなかには、「疑似関係型」とよぶ人もいます。

Wikipedia の [関係モデル] のページをみてみると、
SQL が、どのような点で、関係モデルに準拠していないかが説明されています。
「関係」の代わりに「表」を使うという基本的違いを始め、
つぎのような違いがあります。

 - 行の重複
 - 名前のない列
 - 列名の重複
 - 列に順序がある
 - CHECK OPTION のないビュー
 - 表はひとつ以上の列をもつ
 - NULL

現在、関係モデルにまつわる技術的状況は、
SQL を通すと関係モデルはぼやけてしまうという状況にあり、
関係モデルの理論を知るには、特別の努力が必要であるといえます。
理論の本来のすがたを知らなければ、
理論を実践へ応用することも、実践を理論へ還元することも、十分に行えず、
結果として、関係モデルの潜在能力を発揮できないことにつながります。


E/R モデル
------------------------------------------------------------------

E/R モデルは、おもに、データ・モデリングの分野で使われる理論です。
「E」は「エンティティ」を意味し、「R」はエンティティ間の「関連」を意味します。
関係モデルと E/R モデルは、まったく、別の理論なので、
「関係」と「関連」というよく似た用語は、別の意味をもちます。

エンティティは、モデリングしようとする世界内の存在者です。
たとえば、「作品」「監督」「俳優」などはエンティティとみなせるし、
「監督する」「出演する」「公開する」などは関連とみなせるでしょう。

現在、E/R モデルは、デーテベース設計でよく使われており、
E/R モデルで表現した設計結果を、SQL データベースに変換して実装する
という方法が採用されることがあります。
この方法は十分な実績がありますが、同時に、問題点も残されたままです。
問題点とは、世界内の存在構造に注目する E/R モデルと、
言語を通して世界を分節化しようとする関係モデルとでは、
世界の見方が大きく異なるため、いわゆる、
インピーダンス・ミスマッチが大きいことです。

E/R モデルと関係モデルのどちらかを残して、
このミスマッチを解消するには、大きく分けて、
つぎの方針があります。

1. E/R モデルで設計して、E/R モデルと相性のよいデータベースに実装する。
2. 関係モデルに相性のよい方法で設計して、関係データベースに実装する。

このなかで、より簡単と思われる 2 の方法を考えましょう。

(10 分 + 2 分)


判断
------------------------------------------------------------------
(14 分 + 4 分)


計算例
------------------------------------------------------------------

(14 分 + 4 分)


関係
------------------------------------------------------------------
(10 分 + 2 分)


まとめ
------------------------------------------------------------------

ここまで、関係モデルとは「判断することの計算体系である」という考え方が、
どのような内容であるかを紹介してきました。これは、データベースの利用
という文脈で、どのように役立つのでしょうか。

SQL データベースのテーブルの行をみたら、
それを判断というカテゴリの日本語の文章に対応させてみましょう。
つまり、正しいか間違っているかのどちらかになるような
日本語に翻訳するということです。できれば、そのときに、
フレーゲ・ストロークを頭に思い浮べてください。
フレーゲ・ストロークを思い浮べるとは、データベースには、
正しい情報が入っていると思うことです。
こうすることで、データの意味がはっきりとして、
ほかの人にも伝えやすくなります。
絵では伝わらない内容を、言葉で伝えましょう。

データベースを検索することは、正しい情報から、
合成された正しい情報をつくり出すことです。
これは、判断の集合から、合成された判断の集合をつくり出すということです。
データベースへのクエリは、判断集合が入力されて、
判断集合が出力される装置とみなせます。

より正確には、判断集合から意味を取り除いて、
計算に適した記号体である関係をつくっています。
クエリの内部では、関係から関係へと変換されていきますが、
そのステップごとの関係は、すべて判断集合へ戻せることに注意しましょう。

これらのことが、無意識にできるようになったら、
データベース設計にも、クエリの組み立てにも、
データベースの内容についての意思疎通にも役立ちます。

(8 分 + 2 分)


[Prezi]: http://prezi.com/s6wwdlz9vr1t/presentation/
[関係モデル]: http://ja.wikipedia.org/wiki/関係モデル#SQL.E6.A8.99.E6.BA.96
