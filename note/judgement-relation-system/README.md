# 判断関係系


[関係モデル][関係モデル] (リレーショナル・モデル) は、
どのような形式でデータを組織化するのでしょうか。
その答えは、**判断関係系**
(はんだんかんけいけい、judgement-relation system)
とよばれるもので、その名前のとおり、
判断と関係が一定の構造で組織化された体系です。
それでは、判断と関係はどのようなもので、
そのふたつは、どのように関連するのでしょうか。


判断
------------------------------------------------------------------

**判断** (judgement) は、なにかが正しいか間違っているかを表明したものです。
とくに、判断可能な内容を文章としてあらわしたものは、[命題] とよばれます。
たとえば、「この段落は 5 つの文からなる」という文は、
正しいか間違っているかのどちらかになる文章であるため、命題とみなせます。
実際に、この命題が正しいと表明するには、
[フレーゲ] が [概念記法] のなかで用いた
判断線と内容線を組み合わた記号 `|--` を先頭につけて、

    |-- この段落は 5 つの文からなる。

のように書きます。この `|--` という記号を含めた全体が判断とよばれます。

命題と判断の違いに注意しておくと、命題自体は判断ではなく、
命題に真偽の表明を加えたものが判断になります。
逆にいえば、判断から真偽を取り除き、判断可能な内容だけを残したとき、
それが文章であらわされていれば、命題になります。

上の判断の「この段落」を「第 2 段落」と置き換え、
ほかの段落に関する判断も列挙すると、つぎのようになります。

    |-- 第 1 段落は 2 つの文からなる。
    |-- 第 2 段落は 5 つの文からなる。
    |-- 第 3 段落は 2 つの文からなる。

このような同種の判断の集合体をつくるとデータらしくなってきます。
さらに、これらを機械的に扱えるように判断を分析し、
`/` で文章に区切りを入れます。

    第 / 2 / 段落は / 5 / つの文からなる。

この `/ 2 /` の代わりに項目名 `/par` (paragraph) を与え、
`/ 5 /` の代わりに項目名 `/sent` (sentence) を与えると、
つぎのような型の文になります。

    第 /par 段落は /sent つの文からなる。

この文に `SENTENCE-COUNT` という名前を割り当て、
具体的な項目を `/par 1` や `/sent 3` のように書くことにすると、
上の判断集合は、つぎのように記号化できます。

    |-- SENTENCE-COUNT  /par 1  /sent 3
    |-- SENTENCE-COUNT  /par 2  /sent 5
    |-- SENTENCE-COUNT  /par 3  /sent 2

これが判断関係系における、一方の構成要素である判断の具体例です。
判断は、なにかが正しいか間違っているかを表明したものであると同時に、
「第 `/par` 段落は `/sent` つの文からなる」のように
項目化された判断では、**項目間の関係** としてデータ解釈を定式化したものともみなせます。
この項目間の関係を、より形式的に扱うことで、
判断関係系の他方の構成要素である関係が得られます。


関係
------------------------------------------------------------------

**関係** (relation) は、判断集合を計算するための記号とみなせます。
たとえば、上の判断集合 `SENTENCE-COUNT` から、
第 2 段落の文の数だけを取り出して、
つぎのような判断に変換したいとします。

    |-- COUNT  /sent 5

判断集合から判断集合を計算するとき、
判断を使って直接、計算するのではなく、
いったん、判断集合を関係に変換し、
関係上で計算した結果を判断集合にもどします。
具体的には、判断集合

    |-- SENTENCE-COUNT  /par 1  /sent 3
    |-- SENTENCE-COUNT  /par 2  /sent 5
    |-- SENTENCE-COUNT  /par 3  /sent 2

から判断種 `SENTENCE-COUNT` を除いて、
指定した項目 `/par` `/sent` からなる関係

    /par /sent
    1    3
    2    5
    3    2

として読み出し、`/par = 2` の組のみの関係に変換し、

    /par /sent
    2    5

さらに、項目 `/sent` のみを取り出した関係に変換します。

    /sent
    5

最後に、判断種 `COUNT` をつけて、関係を判断集合に変換して書き出します。

    |-- COUNT  /sent 5

以上の計算は、甲州記法では、つぎの計算式によって [実行][入出力リスト] できます。

    |== COUNT :
      source SENTENCE-COUNT /par /sent
        | keep /par = 2
        | pick /sent

この例が示唆しているように、関係は、項目名の集合としての見出し

    /par /sent

と、その項目に合わせた組の集合

    1    3
    2    5
    3    2

の組み合わせとして定式化されます。
組の順序や項目の順序を変えても、
もとの判断集合の真偽表明には影響を与えません。
同じ組が複数あっても、同じ内容を繰り返しているだけで、
真偽表明という観点では差異を生じません。
そのため、つぎのように順序と重複度を変えてを関係を描いたとしても、
すべて、同値な関係として扱われます。

    /par /sent     /par /sent     /sent /par      /sent /par 
    1    3         3    2         2     3         2     3
    2    5    =    1    3    =    3     1    =    3     1
    3    2         2    5         5     2         5     2
                                                  5     2
                                                  3     1

上の例のように関係を経由して計算する方法は、
一見したところ、手間がかかるように思えますが、
関係では、判断固有の情報を捨てているために、
計算体系として単純化、および、汎用化されるという利点があります。
たとえば、判断には判断種がついていますが、関係にはついていません。
これは、判断はそのデータ解釈と、直接的に、結びついていますが、
関係はデータ解釈から独立していること、
つまり、個別のデータの意味が捨てられていることに対応します。
数の場合であれば、リンゴが 4 個でも、ボールが 4 個でも、
4 という **数そのもの** を使って計算できます。
それと同じように、判断からデータ解釈を捨象して、
汎用的な操作に向いた形式に整えることで、
**関係そのもの** を使って計算できるようになります。


まとめ
------------------------------------------------------------------

このノートでは、関係モデルにもとづくデータが、
判断関係系として組織化されることを説明しました。
判断は、あることが正しいという形式を項目化することで、データを記述したもので、
関係は、判断集合から判断集合へとデータを計算するための中間媒体として機能します。

判断可能な内容は [The Third Manifesto] の用語でいうところの
**関係変数述語** ([relvar predicate]) に相当します。
判断可能な内容や関係変数述語のようなデータの意味を提供する装置は、
関係に内在するものではなく、関係の外側に同伴するものです。
関係そのものは、数そのもののように意味を捨象することで、
汎用の計算体系として機能することを可能にしています。


[入出力リスト]: INOUT.md
[関係モデル]: http://ja.wikipedia.org/wiki/関係モデル
[フレーゲ]: http://ja.wikipedia.org/wiki/ゴットロープ・フレーゲ
[概念記法]: http://ja.wikipedia.org/wiki/概念記法
[命題]: http://ja.wikipedia.org/wiki/命題
[The Third Manifesto]: http://www.thethirdmanifesto.com
[relvar predicate]: http://books.google.co.jp/books?id=zUebAgAAQBAJ&pg=PA83
